
<?php
/**
 * Copyright 2003 - 2007 eSector Solutions, LLC
 *
 * All rights reserved.
 *
 * This file is part of Open Constructor (http://www.openconstructor.org/).
 *
 * Open Constructor is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License version 2
 * as published by the Free Software Foundation.
 *
 * Open Constructor is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * The GNU General Public License can be found at
 * http://www.gnu.org/copyleft/gpl.html
 *
 * $Id: headline._wc,v 1.5 2007/03/01 12:08:08 sanjar Exp $
 */
	require_once('../include/headlines._wc');
	if(intval(@$_POST['pagesize'])>0)
		$objm->pageSize = $_POST['pagesize'];
	$pagesize = intval(@$_POST['pagesize']) > 0 ? $_POST['pagesize'] : $objm->pageSize;
	$searchclause=get_clause(@$_GET['search'],'o.name,o.description');
	$hl=$objm->get_objects($nodetype, $curnode, @$_GET['page'],$searchclause);

	$fields=array(
		'name'=>HL_NAME,
		'description'=>true,
		'date'=>HL_DATE
	);

	$fieldnames = array(
		'description' => array('name' => 'description', 'title' => RP_SHOW_INTRO, 'st' => ''),
		'date' => array('name' => 'date', 'title' => RP_SHOW_DATE, 'st' => '')
	);

	foreach($fieldnames as $key => $value){
		$fieldnames[$key]['st'] = !isset($_COOKIE[$key]) ? '' : $_COOKIE[$key];
        if($_SERVER['REQUEST_METHOD'] == 'POST'){
			$fieldnames[$key]['st'] = (@$_POST[$key] != 'yes') ? 'nch' : '';
			setcookie($key,$fieldnames[$key]['st'], 0, WCHOME.'/objects/');
		}
        if ($fieldnames[$key]['st'] == 'nch') unset($fields[$key]);
	}
    //print_r($fieldnames);
	//if(is_array(@$_COOKIE['vf']))
		//foreach($_COOKIE['vf'] as $f=>$st)
			//if($st=='disabled') unset($fields[$f]);
	//echo '<documents server="'.WCHOME.'/objects/i_objects.php" type="'.$icon.'" defaultaction="delete_obj" size="'.(intval(@$_COOKIE['pagesize'])>0?$_COOKIE['pagesize']:$objm->pageSize).'">';
	//echo '<editor href="'.$editor.'" width="'.$w.'" height="null"/>';
	//print_headline($hl);
	//require_once(LIBDIR.'/pager._wc');
	//pager('page','objects o','id','WHERE ds_type="'.$nodetype.'" AND obj_type="'.$curnode.'"',$objm->pageSize,10,$searchclause);
	//echo '</documents>';
?>